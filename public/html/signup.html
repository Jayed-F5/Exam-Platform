<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Quizzy - Inscription</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="../css/index.css">
</head>
<body class="signup-page">
  <header class="header">
    <div class="top-bar">
      <div class="logo-container">
        <a href="/"><img src="logo(1).png" alt="Quizzy Logo" class="logo"></a>
      </div>
      <div class="auth-buttons">
        <button class="btn-dark-toggle" onclick="toggleDarkMode()">
          <i class="fas fa-moon"></i>
        </button>
      </div>
    </div>
  </header>

  <main class="signup-container">
    <h1>Create your account</h1>
    <form class="signup-form" action="/signup" method="POST">
      <div class="form-group">
        <label for="email">Email <span class="required">*</span></label>
        <input type="email" id="email" name="email" required>
      </div>

      <div class="form-group">
        <label for="lastname">Lastname <span class="required">*</span></label>
        <input type="text" id="lastname" name="lastname" required>
      </div>

      <div class="form-group">
        <label for="firstname">Name <span class="required">*</span></label>
        <input type="text" id="firstname" name="firstname" required>
      </div>

      <div class="form-group">
        <label for="birthdate">Birthdate <span class="required">*</span></label>
        <input type="date" id="birthdate" name="birthdate" required>
      </div>

      <div class="form-group">
        <label>Gender <span class="required">*</span></label>
        <div class="radio-group">
          <label><input type="radio" name="gender" value="male" required> Male</label>
          <label><input type="radio" name="gender" value="female"> Female</label>
        </div>
      </div>

      <div class="form-group">
        <label for="institution">Institution <span class="required">*</span></label>
        <input type="text" id="institution" name="institution" required>
      </div>

      <div class="form-group">
        <label for="field">Field <span class="required">*</span></label>
        <input type="text" id="field" name="field" required>
      </div>

      <div class="form-group">
        <label for="password">Password <span class="required">*</span></label>
        <input type="password" id="password" name="password" required pattern=".{8,}" title="8 characters minimum" class="password-field">
        <div class="password-strength"></div>
      </div>

      <div class="form-group">
        <label for="confirm-password">Verify your password <span class="required">*</span></label>
        <input type="password" id="confirm-password" name="confirm_password" required>
        <div class="password-match"></div>
      </div>

      <button type="submit" class="btn btn-primary">Signup</button>
    </form>

    <div id="message-box" class="message-box"></div>

    <p class="login-link">Already have an account? <a href="login.html">Log in</a></p>
  </main>

  <script>
    const messageBox = document.getElementById('message-box');
    const params = new URLSearchParams(window.location.search);

    if (params.has('error')) {
      messageBox.textContent = decodeURIComponent(params.get('error'));
      messageBox.style.color = 'red';
    } else if (params.has('success')) {
      messageBox.textContent = decodeURIComponent(params.get('success'));
      messageBox.style.color = 'green';
    }

    const darkToggleBtn = document.querySelector('.btn-dark-toggle');
    const icon = darkToggleBtn.querySelector('i');

    window.addEventListener('DOMContentLoaded', () => {
      const savedTheme = localStorage.getItem('theme');
      if (savedTheme === 'dark') {
        document.body.classList.add('dark');
        icon.classList.remove('fa-moon');
        icon.classList.add('fa-sun');
      }
    });

    function toggleDarkMode() {
      document.body.classList.toggle('dark');
      const isDark = document.body.classList.contains('dark');
      localStorage.setItem('theme', isDark ? 'dark' : 'light');

      icon.classList.toggle('fa-sun', isDark);
      icon.classList.toggle('fa-moon', !isDark);
    }
  </script>
  
</body>
</html>
